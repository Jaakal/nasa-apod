(this["webpackJsonpnasa-apod"]=this["webpackJsonpnasa-apod"]||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a.n(r),i=a(5),s=a.n(i),o=a(3),l=a(4),d="ADD_MEDIAS_INFO",u="MODIFY_FILTER",m=function(e){var t,a,n;for(t=e.length-1;t>0;t-=1)a=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[a],e[a]=n;return e},h={mediasInfo:[],loading:!0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{mediasInfo:m(t.mediasInfo),loading:!1};default:return e}},f=a(10),p=function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31],a=new Date,n=a.getFullYear(),r=a.getMonth(),c=a.getDate();for(n%4===0&&(n%100===0&&n%400!==0||(t[1]=29));e>0;)e=(c-=e)<1?Math.abs(c):0,c<1&&(-1===(r-=1)&&(n-=1,r=11),c=t[r]);return c<10&&(c="0".concat(c.toString())),(r+=1)<10&&(r="0".concat(r.toString())),{string:"".concat(n,"-").concat(r,"-").concat(c),yearString:n.toString(),monthString:r.toString(),dayString:c.toString(),year:parseInt(n,10),month:parseInt(r,10),day:parseInt(c,10)}},b=function(e){return{year:parseInt(e.substring(0,e.indexOf("-")),10),month:parseInt(e.substring(e.indexOf("-")+1,e.lastIndexOf("-")),10),day:parseInt(e.substring(e.lastIndexOf("-")+1),10)}},g=function(e,t){if(e.year>t.year)return!1;if(e.year===t.year){if(e.month>t.month)return!1;if(e.month===t.month&&e.day>=t.day)return!1}return!0},O={startDate:{year:parseInt(p(5).year,10),month:parseInt(p(5).month,10),day:parseInt(p(5).day,10)},endDate:{year:parseInt(p(1).year,10),month:parseInt(p(1).month,10),day:parseInt(p(1).day,10)},category:"All"},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(f.a)(Object(f.a)({},e),t.filter);default:return e}},v=Object(l.b)({medias:j,mediasFilter:y}),x=a(2),I=(a(24),a(25),a(26),[{name:"A Picture of the Day",url:"a-picture-of-the-day"},{name:"Mars Rover Photos",url:"mars-rover-photos"},{name:"Earth Polychromatic Imaging Camera",url:"earth-polychromatic-imaging-camera"}]),M={MAX:p(1).string,MIN:p(5).string};Object.freeze(M);var N=Object(o.b)((function(e){return{filter:e.mediasFilter}}),(function(e){return{modifyFilter:function(t){return e(function(e){return{type:u,filter:e}}(t))}}}))((function(e){var t=e.filter,a=e.modifyFilter,c=Object(r.useState)("".concat(t.startDate.year,"-").concat(t.startDate.month,"-").concat(t.startDate.day)),i=Object(x.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)("".concat(t.endDate.year,"-").concat(t.endDate.month,"-").concat(t.endDate.day)),d=Object(x.a)(l,2),u=d[0],m=d[1],h=Object(r.useState)(t.category),j=Object(x.a)(h,2),f=j[0],p=j[1],g=function(e){switch(e.target.id){case"start-date":o(e.target.value),a({startDate:b(e.target.value)});break;case"end-date":m(e.target.value),a({endDate:b(e.target.value)});break;case"category":p(e.target.value),a({category:e.target.value})}};return Object(n.jsxs)("form",{className:"image-form",children:[Object(n.jsx)("div",{className:"input-wrapper",children:Object(n.jsxs)("label",{htmlFor:"start-date",children:["Date from:",Object(n.jsx)("input",{type:"date",onChange:g,value:s,id:"start-date",name:"start-date",min:M.MIN,max:u})]})}),Object(n.jsx)("div",{className:"input-wrapper",children:Object(n.jsxs)("label",{htmlFor:"end-date",children:["Date to:",Object(n.jsx)("input",{type:"date",onChange:g,value:u,id:"end-date",name:"end-date",min:s,max:M.MAX})]})}),Object(n.jsx)("div",{className:"select-wrapper",children:Object(n.jsxs)("select",{onChange:g,id:"category",value:f,children:[Object(n.jsx)("option",{children:"All"},"all"),I.map((function(e,t){return Object(n.jsx)("option",{children:e.name},t)}))]})})]})})),D=(a(27),a(28),a(11),function(){return Object(n.jsx)("div",{className:"loadingio-spinner-eclipse-w9sa0m5m9bl",children:Object(n.jsx)("div",{className:"ldio-v8jc0562qmk",children:Object(n.jsx)("div",{})})})}),S=function(e){var t=e.media,a=e.media,c=a.category,i=a.url,s=a.mediaType,o=a.title,l=e.onClick,d=Object(r.useRef)(null),u=Object(r.useState)(!0),m=Object(x.a)(u,2),h=m[0],j=m[1],f=Object(r.useCallback)((function(){j(!1)}),[j]);Object(r.useEffect)((function(){var e=d.current;return e.addEventListener("load",f),function(){return e.removeEventListener("load",f)}}),[f]),Object(r.useEffect)((function(){h||(d.current.style.opacity=1)}),[h]);var p="video"===s?Object(n.jsx)("iframe",{src:i,className:"media",ref:d,alt:c.name,title:o.name}):Object(n.jsx)("img",{src:i,className:"media",ref:d,alt:c.name});return Object(n.jsxs)("div",{className:"media-wrapper",onClick:function(){return l(t)},children:[h&&Object(n.jsx)(D,{}),p]})},w=Object(o.b)((function(e){return{medias:e.medias,filter:e.mediasFilter}}))((function(e){var t=e.medias.mediasInfo,a=e.filter,c=e.setMedia,i=Object(r.useState)([]),s=Object(x.a)(i,2),o=s[0],l=s[1];Object(r.useEffect)((function(){l(function(e,t){return e.filter((function(e){return("All"===t.category||t.category===e.category.name)&&!g(e.date,t.startDate)&&!g(t.endDate,e.date)}))}(t,a))}),[t,a]);var d=function(e){return c(e)};return Object(n.jsxs)("div",{className:"image-board",children:[Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),o.map((function(e){return Object(n.jsx)(S,{media:e,onClick:d},e.url)}))]})})),k=(a(29),a(30),function(e){var t=e.headline;return Object(n.jsxs)("div",{className:"logo",children:[Object(n.jsx)("span",{className:"nasa-logo",children:"Nasa"}),Object(n.jsxs)("span",{className:"apod-logo",children:[Object(n.jsx)("span",{className:"dash",children:"\xa0-\xa0"}),t]})]})}),C=function(e){var t=e.media,a=e.media,c=a.category,i=a.title,s=a.date,o=a.explanation,l=e.setMedia;Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var d=Object(n.jsxs)("div",{className:"media-info-title-wrapper",children:[Object(n.jsx)("span",{children:"Earth Polychromatic"}),Object(n.jsx)("span",{className:"space",children:"\xa0"}),Object(n.jsx)("span",{children:"Imaging Camera"})]});return Object(n.jsxs)("div",{className:"info-container",children:[Object(n.jsx)(k,{headline:"Earth Polychromatic Imaging Camera"===c.name?d:c.name}),Object(n.jsxs)("div",{className:"info-wrapper",children:[Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("div",{className:"media-info-media-wrapper",children:Object(n.jsx)(S,{media:t,onClick:function(){}})}),Object(n.jsx)("div",{className:"title",children:i.name}),Object(n.jsx)("div",{className:"date",children:s.string}),Object(n.jsx)("div",{className:"explanation",children:o}),Object(n.jsx)("button",{type:"button",onClick:function(){return l(null)},children:"Main Page"})]})]})},E=function(e){for(var t=[{name:"A Picture of the Day",url:"a-picture-of-the-day"},{name:"Mars Rover Photos",url:"mars-rover-photos"},{name:"Earth Polychromatic Imaging Camera",url:"earth-polychromatic-imaging-camera"}],a="pTCOGdr0OJfLMQb6wfV9coKMqH3e3BZ8yOFXszLv",n=[],r=[],c=function(e){for(var c=function(c){var i=p(c),s=void 0;switch(t[e].name){case"A Picture of the Day":s="https://api.nasa.gov/planetary/apod?date=".concat(i.string,"&api_key=").concat(a);break;case"Mars Rover Photos":s="https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?earth_date=".concat(i.string,"&page=1&api_key=").concat(a);break;case"Earth Polychromatic Imaging Camera":s="https://api.nasa.gov/EPIC/api/natural/date/".concat(i.string,"?api_key=").concat(a)}var o=fetch(s).then((function(e){return e.json()})).then((function(a){switch(t[e].name){case"A Picture of the Day":r.push({id:r.length.toString(),date:i,explanation:a.explanation,title:{name:a.title,url:a.title.replace(/ /g,"-").toLowerCase()},url:a.url,category:t[e],mediaType:a.media_type});break;case"Mars Rover Photos":if(0===a.photos.length)break;var n=Math.floor(Math.random()*a.photos.length);r.push({id:r.length.toString(),date:i,explanation:a.photos[n].camera.full_name,title:{name:a.photos[n].rover.name,url:"".concat(a.photos[n].rover.name.replace(/ /g,"-").toLowerCase(),"-").concat(r.length)},url:a.photos[n].img_src,category:t[e],mediaType:"image"});break;case"Earth Polychromatic Imaging Camera":if(0===a.length)break;var c=Math.floor(Math.random()*a.length);r.push({id:r.length.toString(),date:i,explanation:a.caption,title:{name:"Mother Earth",url:"mother-earth-".concat(r.length)},url:"https://epic.gsfc.nasa.gov/archive/natural/".concat(i.yearString,"/").concat(i.monthString,"/").concat(i.dayString,"/jpg/").concat(a[c].image,".jpg"),category:t[e],mediaType:"image"})}})).catch((function(e){return console.error(e)}));n.push(o)},i=5;i>0;i-=1)c(i)},i=0;i<t.length;i+=1)c(i);Promise.all(n).then((function(){return e(r)}))},P=Object(o.b)((function(e){return{medias:e.medias}}),(function(e){return{addMediasInfo:function(t){e({type:d,mediasInfo:t})}}}))((function(e){var t=e.medias.loading,a=e.addMediasInfo,c=Object(r.useState)(null),i=Object(x.a)(c,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){t&&E(a)}),[t,a]),Object(n.jsx)(n.Fragment,{children:t?Object(n.jsx)(D,{}):Object(n.jsx)("div",{className:"app",children:s?Object(n.jsx)(C,{media:s,setMedia:o}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(k,{headline:"A Picture of the Day"}),Object(n.jsx)(N,{}),Object(n.jsx)(w,{setMedia:o})]})})})})),F=Object(l.c)(v);s.a.render(Object(n.jsx)(o.a,{store:F,children:Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(P,{})})}),document.getElementById("root"))}],[[31,1,2]]]);
//# sourceMappingURL=main.4365fe2c.chunk.js.map